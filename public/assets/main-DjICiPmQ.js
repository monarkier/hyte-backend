import{f as l}from"./fetch-DP51Om_7.js";document.getElementById("showLogin").addEventListener("click",function(){document.querySelector(".loginForm").classList.remove("hidden"),document.querySelector(".registerForm").classList.add("hidden")});document.getElementById("showRegister").addEventListener("click",function(){document.querySelector(".registerForm").classList.remove("hidden"),document.querySelector(".loginForm").classList.add("hidden")});document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".registerForm")});const m=async s=>{s.preventDefault();const o=document.querySelector(".registerForm"),n=o.querySelector("#username").value.trim(),a=o.querySelector("#password").value.trim(),c=o.querySelector("#email").value.trim(),i={username:n,password:a,email:c},t="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/users",e={body:JSON.stringify(i),method:"POST",headers:{"Content-type":"application/json"}};console.log(e);const r=await l(t,e);if(r.error){console.error("Error adding a new user:",r.error);return}r.message&&(console.log(r.message,"success"),localStorage.setItem("token",r.token),localStorage.setItem("nimi",r.username),window.location.href="./paivakirja.html"),console.log(r),o.reset()},u=async s=>{s.preventDefault();const o=document.querySelector(".loginForm"),n=o.querySelector("input[name=username]").value,a=o.querySelector("input[name=password]").value,c={username:n,password:a},i="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/auth/login",t={body:JSON.stringify(c),method:"POST",headers:{"Content-type":"application/json"}};console.log(t);const e=await l(i,t);if(e.error){console.error("Error adding a new user:",e.error);return}e.message&&(console.log(e.message,"success"),localStorage.setItem("token",e.token),localStorage.setItem("nimi",e.user.username),window.location.href="./paivakirja.html"),console.log(e),o.reset()},d=document.querySelector(".registerForm");d.addEventListener("submit",m);const g=document.querySelector(".loginForm");g.addEventListener("submit",u);
