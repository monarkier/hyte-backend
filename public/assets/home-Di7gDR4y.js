import{f as i}from"./fetch-DP51Om_7.js";const u=async()=>{const o="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/entries";let e={};e={Authorization:`Bearer ${localStorage.getItem("token")}`};const t={headers:e};console.log(t);const n=await i(o,t);if(n.error){console.log("Tapahtui virhe fetch haussa!!"),console.log(n.error);return}console.log(n),m(n)},m=o=>{const e=document.querySelector("#entries-table-body");e.innerHTML="",o.forEach(r=>{const t=document.createElement("tr");t.innerHTML=`
        <td>${r.sleep_duration}</td>
        <td>${r.sleep_quality}</td>
        <td>${r.dream_description}</td>
        <td>${new Date(r.created_at).toLocaleDateString("fi-FI")}</td>
      `,e.appendChild(t)})},y=async o=>{o.preventDefault();const e=document.querySelector("#sleep-duration").value.trim(),r=document.querySelector("#sleep-quality").value.trim(),t=document.querySelector("#dream-description").value.trim(),n="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/entries",l=localStorage.getItem("token"),a={body:JSON.stringify({sleep_duration:e,sleep_quality:r,dream_description:t}),method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-type":"application/json"}};console.log(a);const s=await i(n,a);if(s.error){console.log(s.error);return}s.message&&console.log(s.message),console.log(s),document.querySelector("#sleep-form").reset()},p=async()=>{const o="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/exercises";let e={};e={Authorization:`Bearer ${localStorage.getItem("token")}`};const t={headers:e};console.log(t);const n=await i(o,t);if(n.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(n),h(n)},h=o=>{const e=document.querySelector("#exercise-table-body");e.innerHTML="",o.forEach(r=>{const t=document.createElement("tr");t.innerHTML=`
        <td>${r.type}</td>
        <td>${r.duration}</td>
        <td>${r.intensity}</td>
        <td>${r.notes}</td>
        <td>${new Date(r.created_at).toLocaleDateString("fi-FI")}</td>
      `,e.appendChild(t)})},g=async o=>{o.preventDefault();const e=document.querySelector("#workout-type").value.trim(),r=document.querySelector("#workout-duration").value.trim(),t=document.querySelector("#workout-intensity").value.trim(),n=document.querySelector("#workout-notes").value.trim(),l="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/exercises",c=localStorage.getItem("token"),s={body:JSON.stringify({type:e,duration:r,intensity:t,notes:n}),method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-type":"application/json"}};console.log(s);const d=await i(l,s);if(d.error){console.log(d.error);return}d.message&&console.log(d.message),console.log(d),document.querySelector("#workout-form").reset()},v=async()=>{const o="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/moods";let e={};e={Authorization:`Bearer ${localStorage.getItem("token")}`};const t={headers:e};console.log(t);const n=await i(o,t);if(n.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(n),k(n)},k=o=>{const e=document.querySelector("#mood-table-body");e.innerHTML="",o.forEach(r=>{const t=document.createElement("tr");t.innerHTML=`
        <td>${r.mood}</td>
        <td>${r.notes}</td>
        <td>${new Date(r.created_at).toLocaleDateString("fi-FI")}</td>
      `,e.appendChild(t)})},S=async o=>{o.preventDefault();const e=document.querySelector("#mood").value.trim(),r=document.querySelector("#mood-notes").value.trim(),t="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/moods",n=localStorage.getItem("token"),c={body:JSON.stringify({mood:e,notes:r}),method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-type":"application/json"}};console.log(c);const a=await i(t,c);if(a.error){console.log(a.error);return}a.message&&console.log(a.message),console.log(a),document.querySelector("#mood-form").reset()},f=async()=>{const o="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/auth/me";let e={};e={Authorization:`Bearer ${localStorage.getItem("token")}`};const t={headers:e};console.log(t);const n=await i(o,t);if(n.error){console.log(n.error),console.log("Tapahtui virhe fetch haussa!!");return}console.log(n),L(n)},L=o=>{const e=document.getElementById("userProfile");if(!e){console.error("Elementti 'userProfile' ei löytynyt!");return}e.innerHTML=`
    <h2>Käyttäjätiedot</h2>
    <p><strong>Käyttäjänimi:</strong> ${o.username}</p>
    <p><strong>Sähköposti:</strong> ${o.email}</p>
    <p><strong>Rekisteröitynyt:</strong> ${new Date(o.created_at).toLocaleDateString("fi-FI")}</p>
  `},q=async()=>{try{const o=await E();if(console.log(o),!o){console.error("Käyttäjän ID:tä ei löytynyt");return}const e=`https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/users/${o}`,t=await fetch(e,{method:"DELETE"}),n=await t.json();t.ok?(console.log("Käyttäjä poistettu:",n.message),localStorage.clear(),window.location.href="index.html"):console.error("Virhe poistossa:",n.message)}catch(o){console.error("Virhe deleteUser-funktiossa:",o)}},E=async()=>{const o="https://terveyspaivakirja.norwayeast.cloudapp.azure.com/api/auth/me",e=localStorage.getItem("token");if(!e)return console.error("Token puuttuu! Käyttäjä ei ole kirjautunut."),null;const r={headers:{Authorization:`Bearer ${e}`}};try{const t=await fetch(o,r),n=await t.json();return t.ok?(console.log(n.user_id),n.user_id):(console.error("Virhe käyttäjän tietojen haussa:",n.message),null)}catch(t){return console.error("Virhe palvelimeen yhdistäessä:",t),null}};document.getElementById("naytaSleep").addEventListener("click",function(){document.querySelector("#unipaivakirja").classList.remove("hidden"),document.querySelector("#treenipaivakirja").classList.add("hidden"),document.querySelector("#mielialapaivakirja").classList.add("hidden"),document.querySelector("#asetukset").classList.add("hidden")});document.getElementById("naytaExercise").addEventListener("click",function(){document.querySelector("#treenipaivakirja").classList.remove("hidden"),document.querySelector("#unipaivakirja").classList.add("hidden"),document.querySelector("#mielialapaivakirja").classList.add("hidden"),document.querySelector("#asetukset").classList.add("hidden")});document.getElementById("naytaMood").addEventListener("click",function(){document.querySelector("#mielialapaivakirja").classList.remove("hidden"),document.querySelector("#treenipaivakirja").classList.add("hidden"),document.querySelector("#unipaivakirja").classList.add("hidden"),document.querySelector("#asetukset").classList.add("hidden")});document.getElementById("naytaAsetukset").addEventListener("click",function(){document.querySelector("#asetukset").classList.remove("hidden"),document.querySelector("#treenipaivakirja").classList.add("hidden"),document.querySelector("#unipaivakirja").classList.add("hidden"),document.querySelector("#mielialapaivakirja").classList.add("hidden"),f()});document.getElementById("naytaUnet").addEventListener("click",function(){document.querySelector("#view-entries").classList.remove("hidden"),document.querySelector("#add-entry").classList.add("hidden"),u()});document.getElementById("lisaaUnet").addEventListener("click",function(){document.querySelector("#add-entry").classList.remove("hidden"),document.querySelector("#view-entries").classList.add("hidden")});document.getElementById("naytaTreeni").addEventListener("click",function(){document.querySelector("#view-entries-t").classList.remove("hidden"),document.querySelector("#add-entry-t").classList.add("hidden"),p()});document.getElementById("lisaaTreeni").addEventListener("click",function(){document.querySelector("#add-entry-t").classList.remove("hidden"),document.querySelector("#view-entries-t").classList.add("hidden")});document.getElementById("naytaMieliala").addEventListener("click",function(){document.querySelector("#view-entries-m").classList.remove("hidden"),document.querySelector("#add-entry-m").classList.add("hidden"),v()});document.getElementById("lisaaMieliala").addEventListener("click",function(){document.querySelector("#add-entry-m").classList.remove("hidden"),document.querySelector("#view-entries-m").classList.add("hidden")});const w=document.querySelector(".entrySubmit");w.addEventListener("click",y);const j=document.querySelector(".exerciseSubmit");j.addEventListener("click",g);const I=document.querySelector(".moodSubmit");I.addEventListener("click",S);document.getElementById("delete-user").addEventListener("click",()=>{confirm("Haluatko varmasti poistaa käyttäjätilisi? Tätä toimintoa ei voi peruuttaa!")&&q()});document.getElementById("logout").addEventListener("click",()=>{localStorage.clear(),window.location.href="index.html"});
